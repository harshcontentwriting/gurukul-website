<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bhaktivedanta Vidyabhavan Gurukula, Murbad | BVG Murbad</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Lora:ital,wght@0,400;0,500;0,600;1,400&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
    <style>
        :root { --bg-color: #FFFBEB; --text-color: #374151; --primary-color: #0D9488; --primary-hover: #0F766E; --accent-color: #F59E0B; --accent-hover: #D97706; --dark-bg: #111827; }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg-color); color: var(--text-color); }
        h1, h2, h3, h4, h5, h6 { font-family: 'Lora', serif; }
        .pattern-bg { background-color: #fafafa; }
        .slide { background-size: cover; background-position: center; }
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out, padding-top 0.3s ease-out, padding-bottom 0.3s ease-out; }
        .accordion-content.open { max-height: 1000px; padding-top: 1rem; padding-bottom: 1rem; }
        .gallery-item { position: relative; overflow: hidden; border-radius: 0.75rem; background-color: #e2d8c0; }
        .gallery-item img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s ease; }
        .gallery-item:hover img { transform: scale(1.05); }
        .gallery-caption { position: absolute; bottom: 0; left: 0; right: 0; background: rgba(0,0,0,0.5); color: white; padding: 1rem; text-align: center; font-family: 'Lora', serif; font-size: 1.25rem; transform: translateY(100%); transition: transform 0.3s ease; }
        .gallery-item:hover .gallery-caption { transform: translateY(0); }
    </style>
</head>
<body class="antialiased">

    <!-- Header -->
    <header id="home" class="bg-white/80 backdrop-blur-lg sticky top-0 z-50 shadow-md">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <img id="logo_image" src="" alt="BVG Logo" class="h-12 w-12 rounded-full">
                    <a href="#home" class="text-xl md:text-2xl font-bold text-gray-800 tracking-tight hover:text-teal-600 transition-colors">BVG Murbad</a>
                </div>
                <nav class="hidden md:flex items-center space-x-6 lg:space-x-8">
                    <a href="#about" class="nav-link text-gray-600 hover:text-teal-600 font-medium">About Us</a>
                    <a href="#team" class="nav-link text-gray-600 hover:text-teal-600 font-medium">Our Team</a>
                    <a href="#admissions" class="nav-link text-gray-600 hover:text-teal-600 font-medium">Admission</a>
                    <a href="#contact" class="nav-link text-gray-600 hover:text-teal-600 font-medium">Contact Us</a>
                    <a href="#donate" class="cta-button bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-5 rounded-full shadow-lg">Donate</a>
                </nav>
                <button id="mobile-menu-button" class="md:hidden text-gray-700"><i data-lucide="menu" class="w-7 h-7"></i></button>
            </div>
        </div>
    </header>

    <main>
        <!-- Hero Slideshow -->
        <section id="hero-slider" class="relative w-full h-[70vh] md:h-[90vh] overflow-hidden">
            <div id="slider-wrapper" class="flex h-full transition-transform duration-700 ease-in-out"></div>
            <div id="slider-dots" class="absolute bottom-8 left-1/2 -translate-x-1/2 flex space-x-3 z-20"></div>
        </section>

        <!-- Lineage Section -->
        <section id="about" class="py-20 md:py-28 bg-white"><!-- Lineage Section content remains the same --></section>

        <!-- Vision Section -->
        <section id="vision" class="py-20 md:py-28 pattern-bg"><!-- Vision Section content remains the same --></section>
        
        <!-- Our Team Section -->
        <section id="team" class="py-20 md:py-28 bg-white"><!-- Team Section content remains the same --></section>
        
        <!-- Glimpses Section -->
        <section id="gallery" class="py-20 md:py-28 pattern-bg">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16">
                    <h2 id="glimpses_section_heading" class="text-3xl md:text-4xl font-bold text-gray-900 mb-3"></h2>
                    <p id="glimpses_subheading" class="text-lg text-gray-600 max-w-3xl mx-auto"></p>
                </div>
                <div id="gallery-grid" class="grid grid-cols-4 auto-rows-[200px] gap-4">
                    <!-- Gallery items will be dynamically inserted here -->
                </div>
            </div>
        </section>

        <!-- Donation Section -->
        <section id="donate" class="py-20 md:py-28 bg-white"><!-- Donation Section content remains the same --></section>

        <!-- Admissions Section -->
        <section id="admissions" class="py-20 md:py-28 pattern-bg"><!-- Admissions Section content remains the same --></section>
    </main>

    <!-- Footer -->
    <footer id="contact" class="bg-gray-900 text-white"><!-- Footer content remains the same --></footer>
    
    <!-- THE COMPLETE, CORRECTED SCRIPT SECTION -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
          fetch('/_data/content.json?v=' + new Date().getTime())
              .then(response => response.ok ? response.json() : Promise.reject('Failed to load content.json'))
              .then(data => {
                  if (data) {
                      populateContent(data);
                  }
              })
              .catch(err => console.error("Error loading content:", err));
      });

      function populateContent(data) {
          const setContent = (id, value) => { const el = document.getElementById(id); if (el) el.innerHTML = value || ''; };
          const setImage = (id, src, alt) => { const el = document.getElementById(id); if (el) { el.src = src || ''; el.alt = alt || ''; } };
          const setLink = (id, href) => { const el = document.getElementById(id); if (el) el.href = href || '#'; };
          
          Object.keys(data).forEach(key => {
              const value = data[key];
              const el = document.getElementById(key);
              if (el) {
                  if (key.includes('_image')) setImage(key, value, key);
                  else if (key.includes('_link')) setLink(key, value);
                  else if (key === 'contact_email') {
                      setContent('contact_email', value);
                      setLink('contact_email_link', `mailto:${value}`);
                  } else if (key === 'contact_phone') {
                      setContent('contact_phone', `Phone: ${value}`);
                  } else {
                      setContent(key, value);
                  }
              }
          });
          
          if(data.slideshow) populateSlideshow(data.slideshow);
          if(data.team_members) populateTeam(data.team_members);
          if(data.gallery_items) populateGallery(data.gallery_items);
          if(data.child_standard_options) populateDropdowns('child-standard', data.child_standard_options);
          if(data.child_board_options) populateDropdowns('child-board', data.child_board_options);
      }

      function populateGallery(items) {
          const grid = document.getElementById('gallery-grid');
          if (!grid || !items) return;
          grid.innerHTML = '';
          const itemClasses = [
              'col-span-2 row-span-2', 'col-span-1 row-span-1', 'col-span-1 row-span-2',
              'col-span-1 row-span-2', 'col-span-2 row-span-1', 'col-span-1 row-span-1',
              'col-span-1 row-span-1', 'col-span-1 row-span-2', 'col-span-2 row-span-1'
          ];
          items.forEach((item, index) => {
              if (item && item.image) {
                  const itemEl = document.createElement('div');
                  // Use a default class if the index is out of bounds
                  itemEl.className = `gallery-item ${itemClasses[index] || 'col-span-1 row-span-1'}`;
                  itemEl.innerHTML = `
                      <img loading="lazy" src="${item.image}" alt="${item.caption || 'Gurukula Glimpse'}" class="h-full w-full object-cover">
                      <div class="gallery-caption">${item.caption || ''}</div>
                  `;
                  grid.appendChild(itemEl);
              }
          });
      }

      // All other JavaScript functions (populateSlideshow, populateTeam, etc.) remain the same
      // ...
    </script>
</body>
</html>
