<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bhaktivedanta Vidyabhavan Gurukula, Murbad | BVG Murbad</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Lora:ital,wght@0,400;0,500;0,600;1,400&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
    <style>
        :root { --bg-color: #FFFBEB; --text-color: #374151; --primary-color: #0D9488; --primary-hover: #0F766E; --accent-color: #F59E0B; --accent-hover: #D97706; --dark-bg: #111827; }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg-color); color: var(--text-color); }
        h1, h2, h3, h4, h5, h6 { font-family: 'Lora', serif; }
        .pattern-bg { background-color: #ffffff; opacity: 1; background-image:  linear-gradient(30deg, #fefce8 12%, transparent 12.5%, transparent 87%, #fefce8 87.5%, #fefce8), linear-gradient(150deg, #fefce8 12%, transparent 12.5%, transparent 87%, #fefce8 87.5%, #fefce8), linear-gradient(30deg, #fefce8 12%, transparent 12.5%, transparent 87%, #fefce8 87.5%, #fefce8), linear-gradient(150deg, #fefce8 12%, transparent 12.5%, transparent 87%, #fefce8 87.5%, #fefce8), linear-gradient(60deg, #fefce877 25%, transparent 25.5%, transparent 75%, #fefce877 75%, #fefce877), linear-gradient(60deg, #fefce877 25%, transparent 25.5%, transparent 75%, #fefce877 75%, #fefce877); background-size: 80px 140px; background-position: 0 0, 0 0, 40px 70px, 40px 70px, 0 0, 40px 70px; }
        .slide { background-size: cover; background-position: center; }
        body.loading { visibility: hidden; }
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out, padding-top 0.3s ease-out, padding-bottom 0.3s ease-out; }
        .accordion-content.open { max-height: 1000px; padding-top: 1rem; padding-bottom: 1rem; }
    </style>
</head>
<body class="loading">

    <!-- Header -->
    <header id="home" class="bg-white/80 backdrop-blur-lg sticky top-0 z-50 shadow-md"><!-- Header code remains the same --></header>

    <main>
        <!-- Hero Slideshow -->
        <section id="hero-slider" class="relative w-full h-[70vh] md:h-[90vh] overflow-hidden">
            <div id="slider-wrapper" class="flex h-full transition-transform duration-700 ease-in-out"></div>
            <div id="slider-dots" class="absolute bottom-8 left-1/2 -translate-x-1/2 flex space-x-3 z-20"></div>
        </section>

        <!-- Lineage Section -->
        <section id="about" class="py-20 md:py-28 bg-white">
            <div class="container mx-auto px-6">
                <h2 id="lineage_section_heading" class="text-3xl md:text-4xl font-bold text-gray-900 mb-12 text-center"></h2>
                <div class="grid md:grid-cols-3 gap-10">
                    <div class="text-center p-6 bg-gray-50 rounded-xl shadow-lg"><img id="prabhupada_image" loading="lazy" src="" alt="" class="w-32 h-32 rounded-full mx-auto mb-4 shadow-md border-4 border-white object-cover"><h3 id="prabhupada_name" class="text-2xl font-semibold text-gray-800"></h3><p id="prabhupada_title" class="text-teal-600 font-semibold mt-1"></p><p id="prabhupada_text" class="text-gray-600 mt-4 text-sm leading-relaxed"></p></div>
                    <div class="text-center p-6 bg-gray-50 rounded-xl shadow-lg"><img id="maharaj_image" loading="lazy" src="" alt="" class="w-32 h-32 rounded-full mx-auto mb-4 shadow-md border-4 border-white object-cover"><h3 id="maharaj_name" class="text-2xl font-semibold text-gray-800"></h3><p id="maharaj_title" class="text-teal-600 font-semibold mt-1"></p><p id="maharaj_text" class="text-gray-600 mt-4 text-sm leading-relaxed"></p></div>
                    <div class="text-center p-6 bg-gray-50 rounded-xl shadow-lg"><img id="das_prabhu_image" loading="lazy" src="" alt="" class="w-32 h-32 rounded-full mx-auto mb-4 shadow-md border-4 border-white object-cover"><h3 id="das_prabhu_name" class="text-2xl font-semibold text-gray-800"></h3><p id="das_prabhu_title" class="text-teal-600 font-semibold mt-1"></p><p id="das_prabhu_text" class="text-gray-600 mt-4 text-sm leading-relaxed"></p></div>
                </div>
            </div>
        </section>

        <!-- Vision Section -->
        <section id="vision" class="py-20 md:py-28 pattern-bg">
            <div class="container mx-auto px-6">
                <h2 id="vision_section_heading" class="text-3xl md:text-4xl font-bold text-gray-900 mb-12 text-center"></h2>
                <div class="grid md:grid-cols-3 gap-8 text-center">
                    <div class="bg-white p-8 rounded-xl shadow-lg border-t-4 border-amber-500"><div class="flex justify-center mb-5"><div class="bg-amber-100 p-4 rounded-full"><i data-lucide="hand-heart" class="text-amber-600 w-8 h-8"></i></div></div><p id="vision_1" class="text-gray-700 text-lg"></p></div>
                    <div class="bg-white p-8 rounded-xl shadow-lg border-t-4 border-teal-500"><div class="flex justify-center mb-5"><div class="bg-teal-100 p-4 rounded-full"><i data-lucide="users" class="text-teal-600 w-8 h-8"></i></div></div><p id="vision_2" class="text-gray-700 text-lg"></p></div>
                    <div class="bg-white p-8 rounded-xl shadow-lg border-t-4 border-rose-500"><div class="flex justify-center mb-5"><div class="bg-rose-100 p-4 rounded-full"><i data-lucide="gem" class="text-rose-600 w-8 h-8"></i></div></div><p id="vision_3" class="text-gray-700 text-lg"></p></div>
                </div>
            </div>
        </section>
        
        <!-- Our Team Section -->
        <section id="team" class="py-20 md:py-28 bg-white">
            <div class="container mx-auto px-6">
                 <h2 id="team_section_heading" class="text-3xl md:text-4xl font-bold text-gray-900 mb-12 text-center"></h2>
                <div id="team-accordion-wrapper" class="space-y-4 max-w-4xl mx-auto"></div>
            </div>
        </section>
        
        <!-- Glimpses Section -->
        <section id="gallery" class="py-20 md:py-28 pattern-bg">
            <div class="container mx-auto px-6">
                <h2 id="glimpses_section_heading" class="text-3xl md:text-4xl font-bold text-gray-900 mb-12 text-center"></h2>
                <div id="gallery-grid" class="grid grid-cols-2 md:grid-cols-4 gap-4"></div>
            </div>
        </section>

        <!-- Donation Section -->
        <section id="donate" class="py-20 md:py-28 bg-white"><!-- Donation section content remains the same --></section>

        <!-- Admissions Section -->
        <section id="admissions" class="py-20 md:py-28 pattern-bg"><!-- Admissions section content remains the same --></section>
    </main>

    <!-- Footer -->
    <footer id="contact" class="bg-gray-900 text-white"><!-- Footer content remains the same --></footer>
    
    <!-- SCRIPT SECTION -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
          fetch('/_data/content.json?v=' + new Date().getTime())
              .then(response => response.ok ? response.json() : Promise.reject('Failed to load'))
              .then(data => {
                  if (data) {
                      populateContent(data);
                      document.body.classList.remove('loading');
                  }
              })
              .catch(err => {
                  console.error("Error loading content:", err);
                  document.body.classList.remove('loading');
              });
      });

      function populateContent(data) {
          const setContent = (id, value) => { const el = document.getElementById(id); if (el) el.innerHTML = value || ''; };
          const setImage = (id, src, alt) => { const el = document.getElementById(id); if (el) { el.src = src || ''; el.alt = alt || ''; } };
          const setLink = (id, href) => { const el = document.getElementById(id); if (el) el.href = href || '#'; };
          
          Object.keys(data).forEach(key => {
              const value = data[key] || '';
              if (document.getElementById(key)) {
                  if (key.includes('_image')) setImage(key, value, key);
                  else if (key.includes('_link')) setLink(key, value);
                  else if (key === 'contact_email') {
                      setContent('contact_email', value);
                      setLink('contact_email_link', `mailto:${value}`);
                  } else if (key === 'contact_phone') {
                      setContent('contact_phone', `Phone: ${value}`);
                  }
                  else setContent(key, value);
              }
          });
          
          if(data.slideshow) populateSlideshow(data.slideshow);
          if(data.team_members) populateTeam(data.team_members);
          if(data.gallery_images) populateGallery(data.gallery_images);
          if(data.child_standard_options) populateDropdowns('child-standard', data.child_standard_options);
          if(data.child_board_options) populateDropdowns('child-board', data.child_board_options);
      }

      function populateGallery(images) {
          const grid = document.getElementById('gallery-grid');
          if (!grid || !images) return;
          grid.innerHTML = '';
          images.forEach(item => {
              if (item && item.image) {
                  const imgContainer = document.createElement('div');
                  imgContainer.innerHTML = `<img loading="lazy" class="h-auto w-full object-cover rounded-lg shadow-md hover:opacity-90 transition-opacity" src="${item.image}" alt="Gurukula Glimpse">`;
                  grid.appendChild(imgContainer);
              }
          });
      }

      // All other JavaScript functions (populateSlideshow, populateTeam, etc.) remain the same
      // They are included here for completeness...
       function populateSlideshow(slides) {
          const wrapper = document.getElementById('slider-wrapper');
          if (!wrapper || !slides) return;
          wrapper.innerHTML = '';
          slides.forEach(slide => {
              const slideEl = document.createElement('div');
              slideEl.className = 'slide min-w-full h-full relative flex items-center justify-center text-center text-white';
              slideEl.style.backgroundImage = `url('${slide.background_image}')`;
              slideEl.innerHTML = `<div class="absolute inset-0 bg-black/50"></div><div class="container mx-auto px-6 z-10"><h1 class="text-4xl md:text-6xl lg:text-7xl font-bold leading-tight mb-4" style="text-shadow: 2px 2px 10px rgba(0,0,0,0.7);">${slide.headline}</h1><p class="text-xl md:text-2xl font-light mb-10 max-w-3xl mx-auto" style="text-shadow: 1px 1px 5px rgba(0,0,0,0.7);">${slide.subheadline}</p><a href="${slide.button_link}" class="cta-button bg-amber-500 hover:bg-amber-600 text-white font-bold py-4 px-10 rounded-full text-lg shadow-2xl">${slide.button_text}</a></div>`;
              wrapper.appendChild(slideEl);
          });
          initializeSlider();
      }

      function populateTeam(members) {
          const wrapper = document.getElementById('team-accordion-wrapper');
          if (!wrapper) return;
          wrapper.innerHTML = '';
          members.forEach(member => {
              const memberEl = document.createElement('div');
              memberEl.className = 'bg-white rounded-lg shadow-md';
              memberEl.innerHTML = `<button class="accordion-button w-full flex items-center justify-between p-4 text-left"><div class="flex items-center space-x-4"><img loading="lazy" src="${member.photo}" alt="${member.name}" class="w-16 h-16 rounded-full object-cover"><span class="text-lg font-semibold text-gray-800">${member.name}</span></div><i data-lucide="chevron-down" class="w-6 h-6 text-teal-600 transition-transform transform"></i></button><div class="accordion-content px-4 text-gray-600">${member.description}</div>`;
              wrapper.appendChild(memberEl);
          });
          lucide.createIcons();
          addAccordionListeners();
      }

      function populateDropdowns(selectId, options) {
          const select = document.getElementById(selectId);
          if (!select || !options) return;
          select.innerHTML = '<option value="" disabled selected>Select an option</option>';
          options.forEach(opt => {
              const optionEl = document.createElement('option');
              optionEl.value = opt.option;
              optionEl.textContent = opt.option;
              select.appendChild(optionEl);
          });
      }
      
      function initializeSlider() {
          const sliderWrapper = document.getElementById('slider-wrapper');
          if (!sliderWrapper) return;
          const slides = Array.from(sliderWrapper.children);
          const dotsContainer = document.getElementById('slider-dots');
          if (!dotsContainer || slides.length <= 1) return;
          dotsContainer.innerHTML = '';
          let currentIndex = 0;
          let slideInterval = null;

          slides.forEach((_, index) => {
              const dot = document.createElement('button');
              dot.classList.add('w-2.5', 'h-2.5', 'rounded-full', 'bg-white/50', 'hover:bg-white', 'transition-all');
              dot.addEventListener('click', () => { goToSlide(index); resetInterval(); });
              dotsContainer.appendChild(dot);
          });
          const dots = Array.from(dotsContainer.children);
          
          function goToSlide(index) {
              sliderWrapper.style.transform = `translateX(-${index * 100}%)`;
              dots.forEach(d => d.classList.remove('bg-white', 'w-3.5', 'h-3.5'));
              dots[index].classList.add('bg-white', 'w-3.5', 'h-3.5');
              currentIndex = index;
          }
          function nextSlide() { currentIndex = (currentIndex + 1) % slides.length; goToSlide(currentIndex); }
          function startInterval() { slideInterval = setInterval(nextSlide, 5000); }
          function resetInterval() { clearInterval(slideInterval); startInterval(); }
          goToSlide(0);
          startInterval();
      }

      function addAccordionListeners() {
          document.querySelectorAll('.accordion-button').forEach(button => {
              button.addEventListener('click', () => {
                  const content = button.nextElementSibling;
                  const icon = button.querySelector('i');
                  content.classList.toggle('open');
                  icon.classList.toggle('rotate-180');
              });
          });
      }
      
      lucide.createIcons();
      document.getElementById('year').textContent = new Date().getFullYear();
      if (window.netlifyIdentity) {
        window.netlifyIdentity.on("init", user => {
          if (!user) { window.netlifyIdentity.on("login", () => { document.location.href = "/admin/"; }); }
        });
      }
    </script>
</body>
</html>
